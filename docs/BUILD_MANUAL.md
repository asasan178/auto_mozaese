# è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚» - ãƒ“ãƒ«ãƒ‰ãƒãƒ‹ãƒ¥ã‚¢ãƒ« v1.0

## ğŸ“‹ æ¦‚è¦

è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»ã¯ã€AIæŠ€è¡“ã‚’æ´»ç”¨ã—ãŸè‡ªå‹•ãƒ¢ã‚¶ã‚¤ã‚¯å‡¦ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã¯ã€é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰PyInstallerã‚’ä½¿ã£ãŸãƒ“ãƒ«ãƒ‰ã€é…å¸ƒã¾ã§ã®å®Œå…¨ãªæ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### ğŸ¯ å¯¾è±¡èª­è€…
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºè€…ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼
- ãƒ“ãƒ«ãƒ‰ãƒ»é…å¸ƒä½œæ¥­ã‚’è¡Œã†æ‹…å½“è€…
- ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒ«ãƒ‰ã‚’ä½œæˆã—ãŸã„é–‹ç™ºè€…

### ğŸ“¦ ãƒ“ãƒ«ãƒ‰æˆæœç‰©
- **é…å¸ƒç‰ˆ**: ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ï¼ˆ`è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ`ï¼‰
- **é–‹ç™ºè€…ç‰ˆ**: é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆ`è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é–‹ç™ºç‰ˆ`ï¼‰

### ğŸ†• v1.0ã§ã®ä¸»è¦æ©Ÿèƒ½
- **PyInstallerãƒ™ãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰**: .specãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹æ¨™æº–çš„ãªãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹
- **ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ä¾å­˜æ’é™¤**: ã‚¯ãƒªãƒ¼ãƒ³ã§ä¿å®ˆæ€§ã®é«˜ã„ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 
- **çµ±åˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: æœˆæ¬¡ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ + Discordèªè¨¼å¯¾å¿œ
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œ**: ä»»æ„ã®.ptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒ æ¤œå‡ºå™¨ã¨ã—ã¦ä½¿ç”¨å¯èƒ½
- **é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼**: exeåŒ–æ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
- **æš—å·åŒ–è¨­å®šç®¡ç†**: é…å¸ƒç‰ˆã§ã®èªè¨¼æƒ…å ±å®‰å…¨ç®¡ç†
- **ç’°å¢ƒå¤‰æ•°è¨­å®š**: .envãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹æŸ”è»Ÿãªè¨­å®šç®¡ç†

---

## ğŸ› ï¸ å‰ææ¡ä»¶

### å¿…è¦ãªç’°å¢ƒ
| é …ç›® | è¦ä»¶ | æ¨å¥¨ |
|------|------|------|
| **OS** | Windows 10/11 (64bit) | Windows 11 æœ€æ–°ç‰ˆ |
| **Python** | 3.11ä»¥ä¸Š | Python 3.11.9 |
| **ãƒ¡ãƒ¢ãƒª** | 16GBä»¥ä¸Š | 32GBä»¥ä¸Š |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | 20GBä»¥ä¸Šã®ç©ºãå®¹é‡ | 50GBä»¥ä¸Šï¼ˆSSDæ¨å¥¨ï¼‰ |
| **GPU** | CUDAå¯¾å¿œGPUï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ | RTX 4060ä»¥ä¸Š |

### å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
```bash
# Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
pip >= 23.0

# ä»®æƒ³ç’°å¢ƒ
venv (Pythonã«å«ã¾ã‚Œã‚‹)

# Git (ã‚½ãƒ¼ã‚¹ç®¡ç†)
git >= 2.30

# æ–°è¦è¿½åŠ : æš—å·åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
# cryptography, python-dotenv
```

### v1.0æ©Ÿèƒ½å¯¾å¿œã®è¿½åŠ è¦ä»¶
- **æš—å·åŒ–è¨­å®šä½œæˆ**: é…å¸ƒç‰ˆç”¨ã®èªè¨¼æƒ…å ±è¨­å®š
- **Discord OAuth2è¨­å®š**: Discordèªè¨¼ç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«**: ä»»æ„ã®YOLOå½¢å¼.ptãƒ•ã‚¡ã‚¤ãƒ«
- **ç’°å¢ƒå¤‰æ•°è¨­å®š**: .envãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹é–‹ç™ºè€…è¨­å®š

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆPyInstallerãƒ™ãƒ¼ã‚¹ï¼‰

### 0. äº‹å‰æº–å‚™ï¼ˆåˆå›ã®ã¿ï¼‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd auto_mosaic

# ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
.venv\Scripts\activate.bat

# CUDA/CPUç’°å¢ƒã«å¿œã˜ãŸONNXRuntimeæœ€é©åŒ–ï¼ˆå¿…é ˆï¼‰
cd builds
python setup_onnx_runtime.py
```

âš ï¸ **é‡è¦**: `setup_onnx_runtime.py`ã¯ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ï¼š
- CUDAç’°å¢ƒæ¤œå‡ºã¨GPUç‰ˆ/CPUç‰ˆONNXRuntimeã®è‡ªå‹•é¸æŠ
- äº’æ›æ€§ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆNumPy 2.3.0ç­‰ï¼‰ã®è‡ªå‹•èª¿æ•´
- requirements.txtã®ONNXRuntimeãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç’°å¢ƒã«å¿œã˜ã¦ç½®æ›

### 1. æ¨å¥¨ãƒ“ãƒ«ãƒ‰æ–¹æ³•

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd auto_mosaic

# ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
.venv\Scripts\activate.bat

# buildsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd builds

# é…å¸ƒç‰ˆã‚’ãƒ“ãƒ«ãƒ‰
pyinstaller build_distribution.spec --clean --noconfirm

# é–‹ç™ºè€…ç‰ˆã‚’ãƒ“ãƒ«ãƒ‰
pyinstaller build_developer.spec --clean --noconfirm
```

### 2. ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼å®Ÿè¡Œ

```bash
# é…å¸ƒç‰ˆã®ã¿
cd builds && pyinstaller build_distribution.spec --clean --noconfirm

# é–‹ç™ºè€…ç‰ˆã®ã¿
cd builds && pyinstaller build_developer.spec --clean --noconfirm

# ä¸¡æ–¹ãƒ“ãƒ«ãƒ‰
cd builds && pyinstaller build_distribution.spec --clean --noconfirm && pyinstaller build_developer.spec --clean --noconfirm
```

### 3. ãƒ“ãƒ«ãƒ‰çµæœ

```
builds/
â”œâ”€â”€ dist/                        # PyInstallerã®å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ/       # é…å¸ƒç‰ˆ
â”‚   â”‚   â”œâ”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚».exe
â”‚   â”‚   â”œâ”€â”€ _internal/
â”‚   â”‚   â”œâ”€â”€ config/             # æš—å·åŒ–è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.dat       # æš—å·åŒ–èªè¨¼æƒ…å ±
â”‚   â”‚   â”‚   â””â”€â”€ auth.salt      # æš—å·åŒ–ã‚½ãƒ«ãƒˆ
â”‚   â”‚   â””â”€â”€ models/            # åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â””â”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é–‹ç™ºç‰ˆ/       # é–‹ç™ºè€…ç‰ˆ
â”‚       â”œâ”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚».exe
â”‚       â”œâ”€â”€ .developer_mode     # é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ãƒãƒ¼ã‚«ãƒ¼
â”‚       â”œâ”€â”€ .env               # ç’°å¢ƒå¤‰æ•°è¨­å®š
â”‚       â””â”€â”€ _internal/
â””â”€â”€ build/                      # PyInstallerã®ä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ/
    â””â”€â”€ è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é–‹ç™ºç‰ˆ/
```

---

## ğŸ”§ æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®æº–å‚™

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆæ–°è¦ã®å ´åˆï¼‰
git clone <repository-url> auto_mosaic
cd auto_mosaic

# æ—¢å­˜ã®å ´åˆã¯æœ€æ–°ç‰ˆã«æ›´æ–°
git pull origin main
```

### 2. ä»®æƒ³ç’°å¢ƒã®ä½œæˆ

```bash
# ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆ
python -m venv .venv

# ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
.venv\Scripts\activate.bat

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ›´æ–°ã•ã‚ŒãŸè¦ä»¶ï¼‰
pip install --upgrade pip
pip install -r requirements.txt

# æ–°è¦è¿½åŠ ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
pip install cryptography python-dotenv
```

### 3. ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆï¼ˆv1.0æ©Ÿèƒ½ï¼‰

#### .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
echo DEVELOPER_MODE=true > .env
echo MONTHLY_PASSWORD_2025_01=your_hashed_password >> .env
echo DISCORD_CLIENT_ID=your_discord_client_id >> .env
echo DISCORD_CLIENT_SECRET=your_discord_client_secret >> .env
```

**å®Ÿéš›ã®.envä¾‹**:
```env
# é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰è¨­å®š
DEVELOPER_MODE=true

# æœˆæ¬¡ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥å€¤ï¼‰
MONTHLY_PASSWORD_2025_01=8f4b5e2d7c9a1f6e3b8d4a7c2e9f1b5c8a3d6e9c2f5b8e1a4d7c0f3b6e9a2d5c8
MONTHLY_PASSWORD_2025_02=1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b

# ãƒã‚¹ã‚¿ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥å€¤ï¼‰
MASTER_PASSWORD=master_password_hash_here

# Discord OAuth2è¨­å®š
DISCORD_CLIENT_ID=123456789012345678
DISCORD_CLIENT_SECRET=your_discord_client_secret
DISCORD_REDIRECT_URI=http://localhost:8000/callback
```

### 4. é–‹ç™ºç’°å¢ƒã®æ¤œè¨¼

```bash
# Pythonç’°å¢ƒã®ç¢ºèª
python --version

# å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç¢ºèª
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import ultralytics; print('YOLOv8: OK')"
python -c "import onnxruntime; print(f'ONNX Runtime: {onnxruntime.__version__}')"
python -c "import cryptography; print('æš—å·åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: OK')"
python -c "import dotenv; print('ç’°å¢ƒå¤‰æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: OK')"

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç¢ºèª
python -c "from auto_mosaic.src import gui; print('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«: OK')"

# v1.0æ©Ÿèƒ½ã®ç¢ºèª
python -c "from auto_mosaic.src.auth_manager import AuthenticationManager; print('çµ±åˆèªè¨¼: OK')"
python -c "from auto_mosaic.src.lazy_loader import LazyLoader; print('é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼: OK')"
```

---

## ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°

### 1. PyInstallerã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰

#### é…å¸ƒç‰ˆãƒ“ãƒ«ãƒ‰

```bash
# buildsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
pyinstaller build_distribution.spec --clean --noconfirm
```

**build_distribution.specã®ä¸»è¦è¨­å®š**:
```python
# é…å¸ƒç‰ˆã®ç‰¹å¾´
console=False               # ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãªã—ï¼ˆé™éŸ³èµ·å‹•ï¼‰
optimize=['O1']             # Pythonãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰æœ€é©åŒ–
strip=True                  # ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ³ãƒœãƒ«å‰Šé™¤
upx=True                    # UPXåœ§ç¸®æœ‰åŠ¹

# ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
datas=[
    ('config/auth.dat', 'config/'),      # æš—å·åŒ–è¨­å®š
    ('config/auth.salt', 'config/'),     # æš—å·åŒ–ã‚½ãƒ«ãƒˆ
    ('models/*.pt', 'models/'),          # ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
]

# éš ã—ä¾å­˜é–¢ä¿‚
hiddenimports=[
    'cryptography.fernet',
    'auto_mosaic.src.auth_manager',
    'auto_mosaic.src.discord_auth_adapter',
    'auto_mosaic.src.encrypted_config',
    'auto_mosaic.src.lazy_loader',
]
```

#### é–‹ç™ºè€…ç‰ˆãƒ“ãƒ«ãƒ‰

```bash
# buildsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
pyinstaller build_developer.spec --clean --noconfirm
```

**build_developer.specã®ä¸»è¦è¨­å®š**:
```python
# é–‹ç™ºè€…ç‰ˆã®ç‰¹å¾´
console=True                # ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º
debug=True                  # ãƒ‡ãƒãƒƒã‚°æƒ…å ±ä¿æŒ
optimize=[]                 # æœ€é©åŒ–ç„¡åŠ¹
strip=False                 # ãƒ‡ãƒãƒƒã‚°ã‚·ãƒ³ãƒœãƒ«ä¿æŒ

# é–‹ç™ºè€…å‘ã‘ãƒ‡ãƒ¼ã‚¿
datas=[
    ('.env', '.'),                       # ç’°å¢ƒå¤‰æ•°è¨­å®š
    ('.developer_mode', '.'),            # é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ãƒãƒ¼ã‚«ãƒ¼
    ('models/', 'models/'),              # ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“
]
```

### 2. PyInstallerã‚ªãƒ—ã‚·ãƒ§ãƒ³èª¬æ˜

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ |
|------------|------|
| `--clean` | å‰å›ã®ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰ |
| `--noconfirm` | å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸Šæ›¸ãç¢ºèªã‚’ç„¡åŠ¹åŒ– |
| `--onedir` | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå½¢å¼ã§å‡ºåŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| `--debug=all` | ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ™‚ï¼‰ |

---

## ğŸ“ ãƒ“ãƒ«ãƒ‰æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«

### .specãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆPyInstallerè¨­å®šï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | ç”¨é€” | ç‰¹å¾´ |
|----------|------|------|
| `builds/build_distribution.spec` | é…å¸ƒç‰ˆãƒ“ãƒ«ãƒ‰è¨­å®š | æš—å·åŒ–è¨­å®šåŸ‹ã‚è¾¼ã¿ã€é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼ã€é™éŸ³èµ·å‹• |
| `builds/build_developer.spec` | é–‹ç™ºè€…ç‰ˆãƒ“ãƒ«ãƒ‰è¨­å®š | .envå¯¾å¿œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã€ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ |

### ã‚µãƒãƒ¼ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | æ©Ÿèƒ½ | ç”¨é€” |
|------------|------|------|
| `builds/runtime_hook_onnx.py` | ONNXãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ•ãƒƒã‚¯ | DLLèª­ã¿è¾¼ã¿æœ€é©åŒ– |
| `builds/runtime_hook_onnx_distribution.py` | é…å¸ƒç‰ˆONNXãƒ•ãƒƒã‚¯ | é…å¸ƒç‰ˆå°‚ç”¨æœ€é©åŒ– |
| `builds/setup_onnx_runtime.py` | ONNX Runtimeè¨­å®š | CUDA/CPUè‡ªå‹•é¸æŠ |
| `setup_encrypted_config.py` | æš—å·åŒ–è¨­å®šä½œæˆ | é…å¸ƒç‰ˆèªè¨¼æƒ…å ±ç®¡ç† |
| `setup_env_config.py` | ç’°å¢ƒå¤‰æ•°æ¤œè¨¼ | .envè¨­å®šç¢ºèª |

### ä¸è¦ã«ãªã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå‰Šé™¤å¯¾è±¡ï¼‰

ä»¥ä¸‹ã®ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã¯æ–°ã—ã„ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ä¸è¦ã§ã™ï¼š

| å‰Šé™¤å¯¾è±¡ | ç†ç”± |
|----------|------|
| `build_*.bat` | PyInstallerã®ç›´æ¥å®Ÿè¡Œã«ç½®ãæ›ãˆ |
| `builds/*.bat` | .specãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ“ãƒ«ãƒ‰ã«ç§»è¡Œ |
| `start_*.bat` | å¿…è¦ã«å¿œã˜ã¦å€‹åˆ¥ã«ä½œæˆ |

---

## ğŸ” v1.0æ©Ÿèƒ½å¯¾å¿œã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. æš—å·åŒ–è¨­å®šã®ä½œæˆ

```bash
# é…å¸ƒç‰ˆç”¨æš—å·åŒ–è¨­å®šã‚’ä½œæˆ
python setup_encrypted_config.py

# ã¾ãŸã¯æ‰‹å‹•ä½œæˆ
python -c "
from auto_mosaic.src.encrypted_config import EncryptedConfigManager
config_manager = EncryptedConfigManager()
config_manager.create_encrypted_config({
    'monthly_passwords': {
        '2025-01': 'hashed_password_1',
        '2025-02': 'hashed_password_2'
    },
    'discord_config': {
        'client_id': 'your_client_id',
        'client_secret': 'your_client_secret'
    }
})
"
```

### 2. ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œ

```bash
# ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
mkdir custom_models

# ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ã‚’é…ç½®
# custom_models/my_anime_model.pt
# custom_models/my_detection_model.pt

# ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ã‚’å«ã‚ã‚‹å ´åˆ
# build_distribution.spec ã«è¿½åŠ :
# datas=[('custom_models/*.pt', 'custom_models/')]
```

### 3. Discordèªè¨¼è¨­å®š

```bash
# Discord Developer Portalã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
# 1. https://discord.com/developers/applications ã«ã‚¢ã‚¯ã‚»ã‚¹
# 2. æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
# 3. OAuth2 > Redirects ã« http://localhost:8000/callback ã‚’è¿½åŠ 
# 4. Bot > Privileged Gateway Intents ã‚’è¨­å®š

# .envãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šè¿½åŠ 
echo DISCORD_CLIENT_ID=your_actual_client_id >> .env
echo DISCORD_CLIENT_SECRET=your_actual_client_secret >> .env
```

---

## ğŸ” ç’°å¢ƒè¨ºæ–­ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ç’°å¢ƒè¨ºæ–­ã®å®Ÿè¡Œ

```bash
# PyInstallerãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
pyinstaller --version

# Pythonç’°å¢ƒç¢ºèª
python -c "
import sys
print(f'Python: {sys.version}')
print(f'Platform: {sys.platform}')
"

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ç¢ºèª
python -c "
from auto_mosaic.src.utils import get_device_info
from auto_mosaic.src.env_config import get_env_config
from auto_mosaic.src.auth_config import AuthConfig

print('=== ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­ ===')
print(f'ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±: {get_device_info()}')

env_config = get_env_config()
print(f'é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰: {env_config.is_developer_mode()}')

auth_config = AuthConfig()
print(f'èªè¨¼æ–¹å¼åˆ‡ã‚Šæ›¿ãˆå¯èƒ½: {auth_config.is_auth_method_switching_available()}')
"

# .specãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
cd builds
dir *.spec
```

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. PyInstallerã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `pyinstaller: command not found`
```bash
# è§£æ±ºæ–¹æ³•
pip install pyinstaller
```

**ã‚¨ãƒ©ãƒ¼**: `ModuleNotFoundError: No module named 'cryptography'`
```bash
# è§£æ±ºæ–¹æ³•
pip install cryptography python-dotenv
```

**ã‚¨ãƒ©ãƒ¼**: `.spec file not found`
```bash
# è§£æ±ºæ–¹æ³•: buildsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd builds
pyinstaller build_distribution.spec --clean --noconfirm
```

#### 2. ç’°å¢ƒå¤‰æ•°è¨­å®šã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `.env file not found or invalid`
```

**è§£æ±ºæ–¹æ³•:**
```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
echo DEVELOPER_MODE=true > .env

# æ¨©é™ç¢ºèª
ls -la .env
```

#### 3. æš—å·åŒ–è¨­å®šã‚¨ãƒ©ãƒ¼

```bash
[ERROR] Encrypted config decryption failed
```

**è§£æ±ºæ–¹æ³•:**
```bash
# æš—å·åŒ–è¨­å®šã‚’å†ä½œæˆ
python setup_encrypted_config.py --reset

# ã¾ãŸã¯æ‰‹å‹•å‰Šé™¤ã—ã¦å†ä½œæˆ
del config\auth.dat config\auth.salt
```

#### 4. ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

```bash
[ERROR] Custom model file not found
```

**è§£æ±ºæ–¹æ³•:**
```bash
# ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹ç¢ºèª
python -c "
from pathlib import Path
model_path = Path('custom_models/my_model.pt')
print(f'ãƒ¢ãƒ‡ãƒ«å­˜åœ¨: {model_path.exists()}')
print(f'çµ¶å¯¾ãƒ‘ã‚¹: {model_path.absolute()}')
"
```

#### 5. Discordèªè¨¼ã‚¨ãƒ©ãƒ¼

```bash
[ERROR] Discord authentication failed: Invalid client credentials
```

**è§£æ±ºæ–¹æ³•:**
```bash
# Discordè¨­å®šç¢ºèª
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
print(f'Client ID: {os.getenv(\"DISCORD_CLIENT_ID\", \"æœªè¨­å®š\")}')
print(f'Client Secret: {\"è¨­å®šæ¸ˆã¿\" if os.getenv(\"DISCORD_CLIENT_SECRET\") else \"æœªè¨­å®š\"}')
"
```

---

## ğŸ“Š ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–è¨­å®šï¼ˆæ›´æ–°ï¼‰

### ã‚µã‚¤ã‚ºæœ€é©åŒ–ï¼ˆæ–°æ©Ÿèƒ½å¯¾å¿œï¼‰

```python
# PyInstallerã‚ªãƒ—ã‚·ãƒ§ãƒ³
excludes=[
    'tkinter.test',
    'test',
    'unittest',
    'distutils',
    'setuptools',
    # æ–°è¦è¿½åŠ : æœªä½¿ç”¨èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
    'oauth2lib',          # Discordèªè¨¼æœªä½¿ç”¨æ™‚
    'cryptography.hazmat.backends.openssl.rsa',  # æœªä½¿ç”¨æš—å·åŒ–æ©Ÿèƒ½
]

# UPXåœ§ç¸®è¨­å®šï¼ˆæ›´æ–°ï¼‰
upx=True
upx_exclude=[
    'vcruntime140.dll',
    'msvcp140.dll',
    'api-*.dll',
    # æ–°è¦è¿½åŠ : CUDA DLL
    'cudart64_*.dll',
    'cublas64_*.dll',
    'cufft64_*.dll',
]
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆé…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼å¯¾å¿œï¼‰

```python
# Pythonæœ€é©åŒ–
optimize=['O1']

# é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
datas=[
    ('models/*.onnx', 'models/'),
    ('config/auth.dat', 'config/'),
    # CUDA DLLã‚’åˆ†é›¢é…ç½®
    ('cuda_libs/*.dll', 'cuda_libs/'),
    ('external_libs/*.dll', 'external_libs/'),
]

# é…å»¶ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¨­å®š
hiddenimports=[
    'auto_mosaic.src.lazy_loader',
    'torch',                    # é…å»¶ãƒ­ãƒ¼ãƒ‰å¯¾è±¡
    'ultralytics',             # é…å»¶ãƒ­ãƒ¼ãƒ‰å¯¾è±¡
    'segment_anything',        # é…å»¶ãƒ­ãƒ¼ãƒ‰å¯¾è±¡
]
```

---

## ğŸ é…å¸ƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆï¼ˆæ›´æ–°ï¼‰

### é…å¸ƒç”¨ZIPä½œæˆ

```bash
# é…å¸ƒç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å«ã‚€ï¼‰
cd dist
powershell Compress-Archive -Path "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ" -DestinationPath "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_v1.2_é…å¸ƒç‰ˆ.zip"

# é–‹ç™ºè€…ç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆï¼ˆ.envå«ã‚€ï¼‰
powershell Compress-Archive -Path "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é–‹ç™ºç‰ˆ" -DestinationPath "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_v1.2_é–‹ç™ºç‰ˆ.zip"

# ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œç‰ˆä½œæˆ
powershell Compress-Archive -Path "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ", "custom_models" -DestinationPath "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_v1.2_ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œç‰ˆ.zip"
```

### é…å¸ƒç”¨READMEä½œæˆï¼ˆæ›´æ–°ï¼‰

```markdown
# è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚» v1.2

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•
1. ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»»æ„ã®å ´æ‰€ã«å±•é–‹
2. `è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚».exe`ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦èµ·å‹•

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
- Windows 10/11 (64bit)
- ãƒ¡ãƒ¢ãƒª: 16GBä»¥ä¸Šæ¨å¥¨
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 10GBä»¥ä¸Šã®ç©ºãå®¹é‡

## ğŸ†• v1.2ã®æ–°æ©Ÿèƒ½
- **çµ±åˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: æœˆæ¬¡ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ + Discordèªè¨¼
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œ**: ä»»æ„ã®.ptãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºå™¨ã¨ã—ã¦ä½¿ç”¨å¯èƒ½
- **é«˜é€ŸåŒ–**: é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼ã«ã‚ˆã‚‹èµ·å‹•æ™‚é–“çŸ­ç¸®

## åˆå›èµ·å‹•æ™‚
- åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
- ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã¾ã™ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šå¿…è¦ï¼‰
- Discordèªè¨¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã¾ã™

## ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ã®ä½¿ç”¨æ–¹æ³•
1. è¨­å®š > é«˜åº¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ > ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«è¨­å®š
2. ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã€ã«ãƒã‚§ãƒƒã‚¯
3. ã€Œãƒ¢ãƒ‡ãƒ«è¿½åŠ ã€ã§.ptãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
4. ã‚¯ãƒ©ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- èµ·å‹•ã—ãªã„å ´åˆ: Windows Defenderã®é™¤å¤–è¨­å®šã‚’ç¢ºèª
- Discordèªè¨¼ã«å¤±æ•—ã™ã‚‹å ´åˆ: ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç„¡åŠ¹åŒ–
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„å ´åˆ: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨.ptãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚’ç¢ºèª
```

---

## ğŸ”„ ç¶™ç¶šçš„ãƒ“ãƒ«ãƒ‰ï¼ˆCI/CDï¼‰

### è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆPowerShellï¼‰

```powershell
# auto_build.ps1
Write-Host "=== è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚» è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  v1.0 ===" -ForegroundColor Green

# ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
& .venv\Scripts\Activate.ps1

Write-Host "[1/5] ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª..." -ForegroundColor Yellow
python setup_env_config.py --verify

Write-Host "[2/5] æš—å·åŒ–è¨­å®šç¢ºèª..." -ForegroundColor Yellow
python setup_encrypted_config.py --verify

Write-Host "[3/5] é…å¸ƒç‰ˆãƒ“ãƒ«ãƒ‰..." -ForegroundColor Yellow
Set-Location builds
pyinstaller build_distribution.spec --clean --noconfirm

Write-Host "[4/5] é–‹ç™ºè€…ç‰ˆãƒ“ãƒ«ãƒ‰..." -ForegroundColor Yellow
pyinstaller build_developer.spec --clean --noconfirm

Write-Host "[5/5] ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ..." -ForegroundColor Yellow
Set-Location dist
Compress-Archive -Path "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ" -DestinationPath "../release/auto_mosaic_distribution.zip" -Force
Compress-Archive -Path "è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é–‹ç™ºç‰ˆ" -DestinationPath "../release/auto_mosaic_developer.zip" -Force
Set-Location ..

Write-Host "ãƒ“ãƒ«ãƒ‰å®Œäº†ï¼" -ForegroundColor Green
```

### GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

```yaml
# .github/workflows/build.yml
name: Build Auto Mosaic

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller

    - name: Build application
      run: |
        cd builds
        pyinstaller build_distribution.spec --clean --noconfirm
        pyinstaller build_developer.spec --clean --noconfirm

    - name: Upload artifacts
      uses: actions/upload-artifact@v3
      with:
        name: auto-mosaic-builds
        path: builds/dist/
```

### è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
# test_build_integrity.py
import subprocess
import sys
from pathlib import Path
import os

def test_exe_startup():
    """EXEãƒ•ã‚¡ã‚¤ãƒ«ã®èµ·å‹•ãƒ†ã‚¹ãƒˆ"""
    exe_path = Path("builds/dist/è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚»_é…å¸ƒç‰ˆ/è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚».exe")
    if not exe_path.exists():
        return False, "EXE file not found"
    
    # 3ç§’é–“ã®èµ·å‹•ãƒ†ã‚¹ãƒˆ
    try:
        result = subprocess.run([str(exe_path), "--test"], 
                              timeout=3, capture_output=True)
        return result.returncode == 0, "Startup test"
    except subprocess.TimeoutExpired:
        return True, "Startup test (timeout OK)"

def test_spec_files():
    """Specãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª"""
    spec_files = [
        Path("builds/build_distribution.spec"),
        Path("builds/build_developer.spec")
    ]
    
    missing = [f for f in spec_files if not f.exists()]
    if missing:
        return False, f"Missing spec files: {missing}"
    return True, "All spec files found"

def test_pyinstaller_available():
    """PyInstallerã®å¯ç”¨æ€§ãƒ†ã‚¹ãƒˆ"""
    try:
        result = subprocess.run(["pyinstaller", "--version"], 
                              capture_output=True, text=True)
        return result.returncode == 0, f"PyInstaller {result.stdout.strip()}"
    except FileNotFoundError:
        return False, "PyInstaller not found"

def test_auth_system():
    """èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆ"""
    try:
        from auto_mosaic.src.auth_manager import AuthenticationManager
        auth_manager = AuthenticationManager()
        return True, "Auth system OK"
    except Exception as e:
        return False, f"Auth system error: {e}"

def test_lazy_loader():
    """é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼ã®ãƒ†ã‚¹ãƒˆ"""
    try:
        from auto_mosaic.src.lazy_loader import LazyLoader
        loader = LazyLoader()
        return True, "Lazy loader OK"
    except Exception as e:
        return False, f"Lazy loader error: {e}"

if __name__ == "__main__":
    tests = [
        ("PyInstallerå¯ç”¨æ€§", test_pyinstaller_available),
        (".specãƒ•ã‚¡ã‚¤ãƒ«", test_spec_files),
        ("EXEèµ·å‹•", test_exe_startup),
        ("èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ", test_auth_system),
        ("é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼", test_lazy_loader),
    ]
    
    all_passed = True
    for test_name, test_func in tests:
        success, message = test_func()
        status = "âœ…" if success else "âŒ"
        print(f"{status} {test_name}: {message}")
        if not success:
            all_passed = False
    
    if all_passed:
        print("\nâœ… å…¨ã¦ã®ãƒ“ãƒ«ãƒ‰æ¤œè¨¼ã«æˆåŠŸã—ã¾ã—ãŸ")
        sys.exit(0)
    else:
        print("\nâŒ ãƒ“ãƒ«ãƒ‰æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ")
        sys.exit(1)
```

---

## ğŸ“ˆ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆæ›´æ–°ï¼‰

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·è¦å‰‡

```
v[ãƒ¡ã‚¸ãƒ£ãƒ¼].[ãƒã‚¤ãƒŠãƒ¼].[ãƒ‘ãƒƒãƒ][-ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹]

ä¾‹:
v1.0.0     - åˆå›ãƒªãƒªãƒ¼ã‚¹ï¼ˆçµ±åˆèªè¨¼ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œï¼‰
v1.0.1     - ãƒã‚°ãƒ•ã‚£ãƒƒã‚¯ã‚¹
v1.0.2     - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ›´æ–°
v1.1.0-rc1 - æ¬¡æœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒªãƒªãƒ¼ã‚¹å€™è£œ
```

### ã‚¿ã‚°ä»˜ããƒ“ãƒ«ãƒ‰

```bash
# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ã‚’ä½œæˆ
git tag -a v1.0.0 -m "Release version 1.0.0 - PyInstallerãƒ™ãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ "
git push origin v1.0.0

# ã‚¿ã‚°ä»˜ããƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
git checkout v1.0.0

# ç’°å¢ƒè¨­å®šã‚’ç¢ºèªã—ã¦ã‹ã‚‰ãƒ“ãƒ«ãƒ‰
python setup_env_config.py --verify

# PyInstallerã§ãƒ“ãƒ«ãƒ‰
cd builds
pyinstaller build_distribution.spec --clean --noconfirm
pyinstaller build_developer.spec --clean --noconfirm
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [PyInstallerå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://pyinstaller.readthedocs.io/)
- [PyInstaller .spec ãƒ•ã‚¡ã‚¤ãƒ«](https://pyinstaller.readthedocs.io/en/stable/spec-files.html)
- [PyTorché…å¸ƒã‚¬ã‚¤ãƒ‰](https://pytorch.org/tutorials/advanced/cpp_export.html)
- [ONNX Runtimeé…å¸ƒ](https://onnxruntime.ai/docs/install/)
- [Cryptographyé…å¸ƒã‚¬ã‚¤ãƒ‰](https://cryptography.io/en/latest/installation/)
- [Discord OAuth2ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://discord.com/developers/docs/topics/oauth2)

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/API_Documentation.md` - çµ±åˆèªè¨¼ãƒ»ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œAPIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
- `docs/DEVELOPER_GUIDE.md` - é–‹ç™ºè€…å‘ã‘ã‚¬ã‚¤ãƒ‰
- `docs/USER_GUIDE.md` - ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚¬ã‚¤ãƒ‰
- `docs/CODE_ARCHITECTURE.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

## ğŸ†˜ ã‚µãƒãƒ¼ãƒˆãƒ»å•ã„åˆã‚ã›

### ãƒ“ãƒ«ãƒ‰å¤±æ•—æ™‚ã®æƒ…å ±åé›†

```bash
# ç’°å¢ƒæƒ…å ±åé›†
python --version > build_environment_v1.0.txt
pip list >> build_environment_v1.0.txt
echo %PATH% >> build_environment_v1.0.txt

# PyInstalleræƒ…å ±
pyinstaller --version >> build_environment_v1.0.txt

# v1.0æ©Ÿèƒ½ç¢ºèª
python -c "import cryptography; print(f'cryptography: {cryptography.__version__}')" >> build_environment_v1.0.txt
python -c "import dotenv; print('python-dotenv: OK')" >> build_environment_v1.0.txt

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
dir .env >> build_environment_v1.0.txt
dir config\auth.dat >> build_environment_v1.0.txt
dir builds\*.spec >> build_environment_v1.0.txt

# PyInstallerãƒ“ãƒ«ãƒ‰ãƒ­ã‚°åé›†
copy builds\build\*\warn-*.txt build_logs_v1.0\
```

### PyInstallerãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

```bash
# è©³ç´°ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ãƒ“ãƒ«ãƒ‰
cd builds
pyinstaller build_distribution.spec --clean --noconfirm --debug=all

# ã¾ãŸã¯å€‹åˆ¥ãƒ­ã‚°å‡ºåŠ›
pyinstaller build_distribution.spec --clean --noconfirm --log-level=DEBUG
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚³ãƒãƒ³ãƒ‰

```bash
# çµ±åˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
python -c "
from auto_mosaic.src.auth_manager import AuthenticationManager
auth_manager = AuthenticationManager()
print(f'ç¾åœ¨ã®èªè¨¼æ–¹å¼: {auth_manager.get_current_auth_method()}')
print(f'èªè¨¼çŠ¶æ…‹: {auth_manager.is_authenticated()}')
"

# é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ
python -c "
from auto_mosaic.src.lazy_loader import LazyLoader
loader = LazyLoader()
torch = loader.load_module('torch')
print(f'é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼çµŒç”±ã§PyTorchèª­ã¿è¾¼ã¿: {torch.__version__}')
"

# ãƒ“ãƒ«ãƒ‰å®Œå…¨æ€§ãƒã‚§ãƒƒã‚¯
python test_build_integrity.py
```

---

**ğŸ“ ã“ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯è‡ªå‹•ãƒ¢ã‚¶ã‚¨ã‚» v1.0å¯¾å¿œã§ã™ã€‚**
**ğŸ”„ æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ**
**ğŸ”§ ä¸»è¦æ©Ÿèƒ½: PyInstallerãƒ™ãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã€çµ±åˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«å¯¾å¿œã€é…å»¶ãƒ­ãƒ¼ãƒ€ãƒ¼** 