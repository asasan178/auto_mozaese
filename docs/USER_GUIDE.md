# 自動モザエセ v1.0 - ユーザーガイド

## 📋 概要

自動モザエセ v1.0は、AI技術を活用してアニメ・イラスト画像の男女局部を自動検出し、適切なモザイク処理を適用するツールです。YOLO検出 + SAM分割の高精度処理により、自然な仕上がりを実現し、FANZA基準対応の安全なモザイク処理を提供します。

### ✨ 主な特徴
- **🧠 AI自動検出**: YOLOv8 + SAM による高精度検出システム
- **🔐 Discord認証**: 安全で簡単なDiscord OAuth2認証システム
- **🎭 高品質モザイク**: ブロック・ガウス・白塗り・黒塗りに対応
- **🔧 バッチ処理**: 複数画像の一括処理
- **📱 直感的UI**: 日本語対応の使いやすいインターフェース

## 💻 動作要件

### システム要件
| 項目 | 最小要件 | 推奨要件 |
|------|----------|----------|
| **OS** | Windows 10 (64bit) | Windows 11 最新版 |
| **メモリ** | 8GB | 16GB以上 |
| **ストレージ** | 5GB以上の空き容量 | 10GB以上 |
| **ネットワーク** | インターネット接続（認証時） | 常時接続 |
| **GPU** | なし（CPU処理可能） | NVIDIA製GPU（処理高速化） |

### 対応ファイル形式
- **JPEG** (.jpg, .jpeg)
- **PNG** (.png)
- **BMP** (.bmp)
- **TIFF** (.tiff, .tif)
- **WebP** (.webp)

---

## 🚀 初回起動・認証

### 1. アプリケーションの起動
```
「自動モザエセ.exe」をダブルクリックして起動
```

### 2. Discord認証
```
1. Discord認証画面が自動で表示されます
2. ブラウザが開き、Discordのログイン画面が表示されます
3. お持ちのDiscordアカウントでログインしてください
4. アプリケーションへのアクセスを許可してください
5. 認証が完了すると、自動的にメイン画面に移行します
```

**💡 ヒント**: 一度認証すると、次回起動時は自動的にログインされます。

### 3. 初回セットアップ
初回起動時に「初回セットアップ」画面が表示される場合があります。
```
1. 「セットアップ開始」ボタンをクリック
2. 必要なフォルダが自動作成されます
3. セットアップ完了後、メイン画面に移行します
```

**⚠️ 重要**: 初回使用前に、必要なAIモデルファイルをダウンロードして配置する必要があります。配布版では事前に含まれている場合があります。

---

## 🖥️ 基本操作

### 📁 画像の追加

#### 1. 単一画像の追加
```
「📷 画像追加」ボタンをクリック → 画像ファイルを選択
```

#### 2. フォルダから一括追加
```
「📂 フォルダ追加」ボタンをクリック → フォルダを選択
```
- フォルダ内のすべての画像ファイルが自動的に追加されます
- サブフォルダ内の画像も含めて検索されます

#### 3. 対応ファイル形式
すべての主要画像形式に対応しています（上記の動作要件を参照）。

#### 4. リストの管理
- **リストクリア**: 「🗑️ リストクリア」ボタンで全ての画像を削除
- **追加確認**: 画面下部に「○個の画像」と表示されます

### 📂 出力フォルダの設定

#### 1. 出力先の選択
```
「💾 出力フォルダ選択」ボタンをクリック → 保存先フォルダを選択
```

#### 2. デフォルト設定
- 何も選択しない場合、元画像と同じフォルダに保存されます
- 「モザイク」フォルダが自動作成されます

---

## ⚙️ 基本設定

### 🎯 検出設定

画面右側の「⚙️ 基本設定」で、検出の感度やモザイクの設定を調整できます。

#### 検出信頼度
```
🔢 「検出信頼度」入力ボックスで調整: 0.00 〜 1.00
```
- **低い値 (0.10-0.20)**: 幅広く検出（誤検出も増える可能性）
- **中間値 (0.20-0.30)**: バランス良好（推奨）
- **高い値 (0.40-0.90)**: 確実な部分のみ検出（見逃しが増える可能性）

**推奨設定**: アニメ・イラスト画像は **0.25** 程度が最適です。

#### ぼかし
```
🔢 「ぼかし」入力ボックスで調整: 0.0 〜 1.0
```
- **0.0**: シャープな境界（くっきりとしたモザイク境界）
- **0.5**: 中程度の滑らかさ（推奨）
- **1.0**: 非常に滑らかな境界（自然な仕上がり）

#### 範囲拡張
```
🔢 「範囲拡張」入力ボックスで調整: -50 〜 100 (px)
```
- **マイナス値**: 検出範囲を縮小（精密処理）
- **0**: 検出範囲そのまま（標準）
- **プラス値**: 検出範囲を拡大（安全マージン）

#### 個別拡張範囲
☑️ 「個別拡張範囲」にチェックを入れると、各部位ごとに拡張範囲を個別設定できます。

### 🎭 処理オプション・粒度設定

画面右側の「🎨 処理オプション・粒度設定」で、適用したいモザイクの種類を選択できます（複数選択可能）：

#### ✅ ブロックモザイク（推奨）
- 従来のタイル状モザイク
- FANZA基準準拠
- 法的コンプライアンス対応

#### ⭕ ガウスモザイク
- ぼかし効果によるモザイク
- より自然で美しい仕上がり

#### ⚪ 白塗り
- 検出部分を白色で塗りつぶし
- 完全な隠蔽効果

#### ⚫ 黒塗り
- 検出部分を黒色で塗りつぶし
- 強い隠蔽効果

**💡 ヒント**: 複数の効果を選択すると、それぞれの効果で処理された画像が生成されます。

#### FANZA基準設定
☑️ 「FANZA基準を使用（画像長辺の1%、最小4px）」にチェックを入れると：
- ブロックモザイクのタイルサイズが画像サイズに応じて自動計算されます
- 法的コンプライアンスに対応したモザイク密度が保証されます

#### 手動サイズ設定
FANZA基準を無効にした場合：
- **ブロックモザイク**: 4〜64ピクセルで手動設定可能
- **ガウスモザイク**: 2〜32ピクセルでぼかし半径を手動設定可能

**💡 使い方のコツ**: まず標準設定（検出信頼度0.25、ぼかし0.5、範囲拡張15px）で試してから、お好みに応じて調整してください。

---

## 🧠 検出対象の設定

画面右側の「🎯 検出対象選択」で、モザイクを適用したい部位を選択できます。

### 基本検出対象
チェックボックスから検出したい部位を選択してください：

- **☑️ 男性器**: 男性器官を検出してモザイクを適用
- **☑️ 小陰唇**: 女性器官（小陰唇）を検出してモザイクを適用
- **☑️ 大陰唇**: 女性器官（大陰唇）を検出してモザイクを適用
- **☑️ 睾丸**: 睾丸を検出してモザイクを適用
- **☑️ アナル**: 肛門部を検出してモザイクを適用
- **☑️ 乳首**: 乳首を検出してモザイクを適用（オプション）
- **☑️ 透視**: 透視効果部分を検出してモザイクを適用（アニメ・イラスト専用）
- **☑️ 断面**: 断面描写部分を検出してモザイクを適用（アニメ・イラスト専用）
- **☑️ 全て**: すべての対象を一括選択

**💡 ヒント**: 複数の項目を同時に選択できます。必要な部位のみにチェックを入れてください。

**⚠️ 注意**: 表示される項目は検出器の設定によって変わります。実写専用モードでは「透視」「断面」「全て」は表示されません。

### マスク方式選択

#### 輪郭マスク vs 矩形マスク
高度なオプションを展開すると「🔲 マスク方式選択」で処理方法を選択できます：

**⭕ 輪郭マスク（高精度・処理時間長）** - 推奨
- より自然で正確なモザイク形状
- 検出部分の正確な輪郭に沿ってモザイクを適用
- 処理時間は長くなりますが、品質が向上します

**⭕ 矩形マスク（処理時間短・精度低）**
- シンプルな矩形でモザイクを適用
- 処理速度を重視する場合に選択
- 精度は劣りますが高速処理が可能

**✅ 推奨**: 通常は「輪郭マスク」を選択してください。

---

## 🚀 処理の実行

### 1. 設定確認
- 画像が追加されていることを確認
- 出力フォルダが適切に設定されていることを確認
- モザイク効果と強度が希望通りに設定されていることを確認

### 2. 処理開始
```
「🎯 モザイク処理開始」ボタンをクリック
```

### 3. 処理の監視
- **進捗バー**: 全体の処理進捗を表示
- **処理ログ**: 詳細な処理状況をリアルタイム表示
- **現在の処理**: 「○/○」で現在処理中のファイル番号を表示

### 4. 処理の停止
```
「⏹️ 処理停止」ボタンをクリック（処理中のみ表示）
```

---

## 📁 出力結果

### ファイルの保存場所
```
[出力フォルダ]/モザイク/[効果名]/
```

例：
```
📁 出力フォルダ/
 └── 📁 モザイク/
     ├── 📁 block/          (ブロックモザイク)
     ├── 📁 gauss/          (ガウスモザイク)
     ├── 📁 white/          (白塗り)
     ├── 📁 black/          (黒塗り)
     └── 📁 NoMosaic/       (モザイク不要画像)
```

### ファイル名
処理された画像は元のファイル名で保存されます。

---

## 🔧 メニュー機能

### ファイルメニュー
- **画像ファイルを追加...** (Ctrl+O): 画像ファイルを選択
- **フォルダを追加...** (Ctrl+Shift+O): フォルダを選択
- **出力フォルダを選択...**: 保存先を指定
- **終了** (Ctrl+Q): アプリケーションを終了

### 設定メニュー
- **設定リセット**: すべての設定を初期値に戻す
- **ログフォルダを開く**: 詳細ログファイルを確認

### ヘルプメニュー
- **バージョン情報**: アプリケーションのバージョンを確認

---

## ❓ よくある質問

### Q: 処理に時間がかかります
**A**: 以下を確認してください：
- 高度なオプション → マスク方式選択で「矩形マスク」を選択すると処理が高速化されます
- 大きなサイズの画像は処理時間が長くなります
- 一度に処理する画像数を減らしてみてください

### Q: うまく検出されません
**A**: 以下を試してください：
- 検出信頼度を下げてみてください（0.15-0.20程度）
- 検出対象の設定を確認してください
- 画像の品質や解像度を確認してください

### Q: モザイクが強すぎる/弱すぎます
**A**: 以下の設定を調整してください：
- **FANZA基準を無効**にして、ブロックモザイクやガウスモザイクのサイズを手動で調整
- **ぼかし設定**を変更して境界の滑らかさを調整
- **範囲拡張**を調整してモザイクの適用範囲を変更

### Q: 認証エラーが発生します
**A**: 以下を確認してください：
- インターネット接続を確認してください
- Discordアカウントでログインできることを確認してください
- しばらく待ってから再試行してください

---

## 📞 サポート

技術的な問題については、アプリケーション内の「ログフォルダを開く」から詳細なログファイルを確認できます。

**🎉 自動モザエセをお使いいただき、ありがとうございます！** 